pipeline {
    agent any
    stages {
        
       stage('Deploy') {
            agent {
                docker { 
                      image 'woahbase/alpine-ansible:x86_64' 
                      args '-v /home/centos/ansible-data/:/var/opt -v /home/centos/ansible_cache/:/home/alpine/'
                      
                }
            }
            steps {
                sh 'cd /var/opt && ansible-playbook deploy_ci.yml --extra-vars "jserverport=$paramport"'
                sh 'cd /var/opt && ansible-playbook docker-maven.yml --extra-vars "tagvar=${BUILD_NUMBER}"'
            }
         
        }
   }
   
}
